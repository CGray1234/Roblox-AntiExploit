local Players = game:GetService("Players")
local Player = Players.LocalPlayer

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RemoteEvents = ReplicatedStorage:WaitForChild("RemoteEvents")

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local _Workspace_ = game:GetService("Workspace")
repeat wait() until game:IsLoaded()

local WhitelistedGuis = {"asdf", "BuyCoinsOpener", "CodesGui", "NoticeGui", "BuyCoinsGui", "OffFrame", "SirenFrame", "Tires", "Background", "NFSHP_GAUGE", "AC6_Controls_Module", "A-Chassis Interface", "Gui", "ProximityPrompts", "Zip_UI", "ChangeLogOpener", "GetMoneyGui", "ChangeLog", "AdminTeamOpener", "AdminTeamGui", "ZipTie_Client", "Freecam", "Zip_UI", "Chat", "Freecom", "KCoreUI", "ChatInstallVerifier", "LoadingGui", "TouchGui", "TopbarPlus", "BubbleChat", "RbxCameraUI", "ZipTie_Client", "CrimCarSpawnGui", "CrimCarSpawnGui2", "JailTimer", "LoadingScreenGui", "PoliceCarSpawnGui", "Reasoning", "SUSGui", "ShopGui", "ShopOpener", "TeamChangeGui", "TeamSelectorGui", "WarningGui"}
local BannedItems = {"BodyGyro", "BodyPosition", "BodyForce", "BodyVelocity", "BodyAngularVelocity", "ModuleScript", "Folder"}
local BannedHumanoidStates = {6, 11, 14, 16}
local admins = {}

function isInTable(tableValue, toFind)
	local found = false
	for _,v in pairs(tableValue) do
		if v==toFind then
			found = true
			break;
		end
	end
	return found
end

function Disconnect()
	pcall(function()
		ReplicatedStorage.ClientBanEvent.Ban:FireServer(Player)
		wait(0.01)
		Player:Kick("Our anti-cheat has detected that you were exploiting. Therefore, you have been banned. Source: Client Anti-Cheat")
	end)
end


coroutine.resume(coroutine.create(function()
	while wait(10) do
		pcall(function()
			for _, Child in pairs(Player.PlayerGui:GetChildren()) do
				if table.find(WhitelistedGuis, Child.Name) then return end
				if Child.Name == "Dex" then
					if isInTable(admins, Player.UserId) then
						return
					end
					Disconnect()
				end
			end
			
			if _Workspace_:GetRealPhysicsFPS() > 60 then
				if isInTable(admins, Player.UserId) then
					return
				end
				Disconnect()
			end
		end)
	end
end))

--Code number: 1
Player.Character:WaitForChild("Humanoid").StateChanged:Connect(function(PreviousState, CurrentState)
	if table.find(BannedHumanoidStates, CurrentState.Value) then
		if Player.Character.Humanoid.Health == 0 then
			return
		end
		if isInTable(admins, Player.UserId) then
			return
		end
		Disconnect()
	end
end)
--End code 1

--Code number: 2
Player.Backpack.ChildAdded:Connect(function(Child)
	for _, v in pairs(Child:GetDescendants()) do
		if v.Name:lower():find("bt") then
			if isInTable(admins, Player.UserId) then
				return
			end
			Disconnect()
		end
	end
end)
--End code 2

--Code Number: 3
Player.PlayerGui.ChildAdded:Connect(function(Child)
	if not table.find(WhitelistedGuis, Child.Name) then
		if isInTable(admins, Player.UserId) then
			return
		end
		Disconnect()
	end
end)
--End code 3

if Player.Character:WaitForChild("Humanoid").WalkSpeed > 30 then
	if isInTable(admins, Player.UserId) then
		return
	end
	Disconnect()
end

--Code number: 4
Player.Character.DescendantAdded:Connect(function(Descendant)
	if table.find(BannedItems, Descendant.ClassName) then
		if isInTable(admins, Player.UserId) then
			return
		end
		if Player.Backpack.Cuffs.Equipped == true then
			return
		end
		if Player.Character.Humanoid.Health == 0 then
			return
		end
		
		Disconnect()
	end
end)
--End code 4

